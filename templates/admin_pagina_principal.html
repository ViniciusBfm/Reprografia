<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image-x/png" href="../static/image/icone.ico">
    <title>Reprografia</title>
    <!-- Tabelas-->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.js"></script>
    <link href="../static/css/index.css" rel="stylesheet" />

</head>
<body>
    <header>
        <div class="header-info">
            <img class="menu-btn" src="../static/image/menu.png" alt="">
            <h1>Reprografia</h1>
        </div>
        <div class="header-perfil">
            <h6>Usuário: {{ nome_usuario }}</h6>
            <form action="{{ url_for('logout') }}" method="post">
                <button type="submit" style="background: none; border: none; padding: 0; margin: 0; cursor: pointer;">
                    <img src="../static/image/sair.png" alt="Sair">
                </button>
            </form>
        </div>
    </header>
    <section class="menu-infos">
        <nav class="menu" id="menu">
            <ul>
                <ul class="menu-box" >
                    <h3 class="localizar">Dashboard</h3>
                    <li class="menudiv1 active" onclick="toggleMenu(this)">
                        <div class="menu-a1" href="#solicitacao">
                            <div>
                                <img class="iconeimg" src="../static/image/solicitação.png" alt="">
                                <a class="link1" >Solicitação</a>
                            </div>
                            <img class="setaimg" src="../static/image/seta-direita.png" alt="">
                        </div>
                    </li>
                </ul>  
                <ul class="menu-box">
                    <h3 class="localizar" style="margin-top: 20px;">Relatórios</h3>
                    <li class="menudiv1" onclick="toggleMenu(this)">
                        <div class="menu-a1" href="#gerarRelatorio">
                            <div>
                                <img class="iconeimg" src="../static/image/relatorio.png" alt="">
                                <a class="link1" >Gerar Relatório</a>
                            </div>
                            <img class="setaimg" src="../static/image/seta-direita.png" alt="">
                        </div>
                    </li>
                </ul>
                <ul class="menu-box">
                    <h3 class="localizar" style="margin-top: 20px;">Painel admin</h3>
                    <li class="menudiv1" onclick="toggleMenu(this)">
                        <div class="menu-a1" href="#usuarios">
                            <div>
                                <img class="iconeimg" src="../static/image/admin.png" alt="">
                                <a class="link1" >Usuários</a>
                            </div>
                            <img class="setaimg" src="../static/image/seta-direita.png" alt="">
                        </div>
                    </li>
                    
                    <li class="menudiv1" onclick="toggleMenu(this)">
                        <div class="menu-a1" href="#alterarnome">
                            <div>
                                <img class="iconeimg" src="../static/image/alterarnome.png" alt="">
                                <a class="link1" >Alterar nome</a>
                            </div>
                            <img class="setaimg" src="../static/image/seta-direita.png" alt="">
                        </div>
                    </li>
                    <li class="menudiv1" onclick="toggleMenu(this)">
                        <div class="menu-a1" href="#alterarfuncao">
                            <div>
                                <img class="iconeimg" src="../static/image/funcao.png" alt="">
                                <a class="link1" >Alterar função</a>
                            </div>
                            <img class="setaimg" src="../static/image/seta-direita.png" alt="">
                        </div>
                    </li>
                </ul>

            </ul>
        </nav>      
        <div class="infos" id="infos">
            <div id="solicitacao" class="conteudo">
                <div class="solicitacao-container">
                    <div class="titulo">
                        <div>
                            <h1>Solicitação</h1>
                        </div>
                        
                    </div>

                    <div class="solicitar-container">
                        <div class="solicitar-box" href="#solicitar">
                            <div>
                                <h3>Solicitar impressão</h3>
                                <p>Clique aqui</p>
                            </div>
                            <img src="../static/image/solicitar.png" alt="todas solicitações">
                        </div>
                        <div class="solicitar-box"  href="#todassolicitacoes">
                            <div>
                                <h3>Todas solicitações</h3>
                                <p>{{ total_solicitacoes }} solicitações</p>
                            </div>
                            
                            <img src="../static/image/todas_solicitacoes.png" alt="todas solicitações">
                        </div>
                        <div class="solicitar-box" href="#aprovadassolicitacoes">
                            <div>
                                <h3>Solicitações aprovadas</h3>
                                <p>{{ total_solicitacoes_aprovadas }} aprovadas</p>
                            </div>                           
                            <img src="../static/image/aprovadas.png" alt="Solicitações aprovadas">
                        </div>
                        <div class="solicitar-box" href="#pendentessolicitacoes">
                            <div>
                                <h3>Solicitações pendentes</h3>
                                <p>{{ total_solicitacoes_pendente }} pendentes</p>
                            </div>                  
                            <img src="../static/image/pendentes.png" alt="Solicitações pendentes">
                        </div>
                    </div>

                    <div class="solicitar-form">
                        <div id="infos2-solicitacao" class="infos2">
                            <div id="solicitar" class="conteudo2">
                                <h2 style="color: #0061f2;">Solicitar impressão</h2>
                                <form action="{{ url_for('processar_solicitacao') }}" method="post" enctype="multipart/form-data">
                                    <div class="solicitar-paginas">
                                        <div>
                                            <p>Número de Páginas:</p>
                                            <input type="number" name="numPaginas" required placeholder="Digite o número de páginas">
                                        </div>
                                        <div>
                                            <p>Número de Cópias:</p>
                                            <input type="number" name="numCopias" required placeholder="Digite o número de cópias">
                                        </div>
                                    </div>
                  
                   
        
                                    <div class="solicitar-paginas">
                                        <div>
                                            <p>Setor:</p>
                                            <select name="sala" required>
                                                <option value="" disabled selected>Escolha a sala</option>
                                                {% for sala in sala_opcao %}
                                                    <option value="{{ sala }}">{{ sala }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div>
                                            <p>Cor:</p>
                                            <select name="cor" required>
                                                {% for cor in cor_opcao %}
                                                    <option value="{{ cor }}">{{ cor }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
        
                                    <div class="solicitar-paginas">
                                        <div class="data">
                                            <label for="data">Data e Hora para a solicitação:</label>
                                            <input type="datetime-local" name="data" required>
                                        </div>
                                        <div>
                                            <p>Arquivo para impressão:</p>
                                            <label for="arquivo" class="file-upload-container">
                                                <div class="file-upload-button">Selecionar Arquivo</div>
                                                <input type="file" name="arquivo" id="arquivo" accept=".pdf, .doc, .docx" required class="file-input">
                                                <div class="file-name" id="file-name">Nenhum arquivo selecionado</div>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <input type="submit" value="Enviar Solicitação">
                                </form>
                            </div>
                            <div id="todassolicitacoes" class="conteudo2">
                                <h2 style="color: #6900c7;">Todas solicitações</h2>
                                <table id="solicitacoes-table" class="display">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>Total de paginas</th>
                                            <th>Setor</th>
                                            <th>Cor</th>
                                            <th>Data para imprimir</th>
                                            <th>Usuário</th>                                        
                                            <th>Aprovação</th>
                                            <th>Excluir</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for solicitacao in solicitacoes %}
                                        <tr>
                                            <td>{{ solicitacao[8] }}</td> 
                                            <td>{{ solicitacao[3] }}</td>
                                            <td>{{ solicitacao[4] }}</td>
                                            <td>{{ solicitacao[5] }}</td>
                                            <td>{{ solicitacao[6] }}</td>
                                            <td>{{ solicitacao[7] }}</td>
                                            <td>
                                                {% if solicitacao[13] == 'pendente' %}
                                                    <form method="post" action="{{ url_for('aprovar_solicitacao', solicitacao_id=solicitacao[0]) }}">
                                                        <input type="hidden" name="_method" value="POST">
                                                        <button type="submit">Aprovar</button>
                                                    </form>
                                                {% else %}
                                                    Aprovado
                                                {% endif %}
                                            </td>  
                                            <td>
                                                <form method="post" action="{{ url_for('excluir_solicitacao', solicitacao_id=solicitacao[0]) }}" onsubmit="return confirm('Tem certeza que deseja excluir?');">
                                                    <input type="hidden" name="_method" value="DELETE">
                                                    <button type="submit" style="background-color: red;">Excluir</button>
                                                </form>
                                            </td>        
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div id="aprovadassolicitacoes" class="conteudo2">
                                <h2 style="color: #00ac69;">Solicitações aprovadas</h2>
                                <table id="aprovadas-table" class="display">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>N° de Paginas</th>
                                            <th>N° de copias</th>
                                            <th>Setor</th>
                                            <th>Cor</th>
                                            <th>Data para imprimir</th>
                                            <th>Usuário</th>
                                            <th>Aprovação</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                            {% for solicitacao in solicitacoes_aprovadas %}
                                        <tr>
                                            <td>{{ solicitacao[8] }}</td> 
                                            <td>{{ solicitacao[1] }}</td>
                                            <td>{{ solicitacao[2] }}</td>
                                            <td>{{ solicitacao[4] }}</td>
                                            <td>{{ solicitacao[5] }}</td>
                                            <td>{{ solicitacao[6] }}</td>
                                            <td>{{ solicitacao[7] }}</td>
                                            <td>
                                                {% if solicitacao[15] == None %}
                                                    Aguardando
                                                {% else %}
                                                    {{ solicitacao[15] }}
                                                {% endif %}
                                            </td>                                   
                                        </tr>
                                        {% endfor %}
                                    </tbody>       
                                </table>
                            </div>
                            <div id="pendentessolicitacoes" class="conteudo2">
                                <h2 style="color: #f4a100;">Solicitações pendentes</h2>
                                <table id="pendentes-table" class="display">
                                    <thead>
                                        <tr>
                                            <th>Data</th>
                                            <th>N° total</th>
                                            <th>Setor</th>
                                            <th>Cor</th>
                                            <th>Data para imprimir</th>
                                            <th>Baixar</th>
                                            <th>Usuário</th>
                                            <th>Aprovar</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for solicitacao in solicitacoes_aguardando %}
                                        <tr>
                                            <td>{{ solicitacao[8] }}</td> 
                                            <td>{{ solicitacao[3] }}</td>
                                            <td>{{ solicitacao[4] }}</td>
                                            <td>{{ solicitacao[5] }}</td>
                                            <td>{{ solicitacao[6] }}</td>
                                            <td>
                                                {% if solicitacao[8] %}
                                                    <a href="{{ url_for('download_arquivo', solicitacao_id=solicitacao[0]) }}">Download</a>
                                                {% else %}
                                                    Sem arquivo
                                                {% endif %}
                                            </td>
                                            <td>{{ solicitacao[7] }}</td>
                                            <td>
                                                {% if solicitacao[13] == 'pendente' %}
                                                    <form method="post" action="{{ url_for('aprovar_solicitacao', solicitacao_id=solicitacao[0]) }}">
                                                        <input type="hidden" name="_method" value="POST">
                                                        <button type="submit">Aprovar</button>
                                                    </form>
                                                {% else %}
                                                    Aprovado
                                                {% endif %}
                                            </td> 
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                    

                                   
                                </table>
                            </div>
                        </div>       
                    </div>                 
                </div>    
            </div>
            <div id="gerarRelatorio" class="conteudo">
                <div class="titulo">
                    <h1>Gerar relatório</h1>
                    <p>Simplifique o controle das suas impressões em um único lugar.</p>
                </div>
                <div class="titulo-relatorio"><h1>Categorias principais</h1></div>
                <div class="relarorio-container">
                    <div class="relatorio-box">
                        <div class="relatorio-box-img">
                            <img src="../static/image/relatorio1.png" alt="">
                        </div>
                        <div class="relatorio-box-info">
                            <h4>Relatório Geral</h4>
                            <p>Relatorio geral informando o número total de impressões em formato pdf</p>
                            <a href="{{ url_for('gerar_pdf') }}" target="_blank">Gerar relatorio</a>
                        </div>
                    </div>

                    <div class="relatorio-box">
                        <div class="relatorio-box-img">
                            <img src="../static/image/relatorio2.png" alt="">
                        </div>
                        <div class="relatorio-box-info">
                            <h4>Relatório por Usuários</h4>
                            <p>Relatorio informando o numero de copias por mês em formato pdf</p>
                            <a href="{{ url_for('gerar_pdf_usuario') }}" target="_blank">Gerar relatorio</a>
                        </div>
                        
                    </div>

                    <div class="relatorio-box">
                        <div class="relatorio-box-img">
                            <img src="../static/image/relatorio3.png" alt="">
                        </div>
                        <div class="relatorio-box-info">
                            <h4>Relatório por Setor</h4>
                            <p>Relatorio informando as impressões por sala em formato pdf</p>
                            <a href="{{ url_for('gerar_pdf_setor') }}" target="_blank">Gerar relatorio</a>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div id="usuarios" class="conteudo">
                <div class="titulo">
                    <h1>Usuários</h1>
                    <p>Otimize a administração dos perfis de seus usuários com facilidade e eficiência.</p>
                </div>
                <div class="usuarios-container">
                    <h2>Usuários cadastrados</h2>

                    <table id="usuarios-table" class="display">
                        
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>ID</th>
                                <th>Função cadastrada</th>
                                <th>Excluir</th>
                                
                            </tr>
                        </thead>
                        <tbody>
                                {% for usuarios in usuarios %}
                            <tr>
                                <td>{{ usuarios[1] }}</td>
                                <td>{{ usuarios[2] }}</td>
                                <td>{{ usuarios[3] }}</td>
                                <td>
                                    <form method="post" action="{{ url_for('excluir_usuario', nome_usuario=usuarios[1]) }}" onsubmit="return confirm('Tem certeza que deseja excluir?');">
                                        <input type="hidden" name="_method" value="DELETE">
                                        <button type="submit">Excluir</button>
                                    </form>
                                </td>      
                            </tr>
                            {% endfor %}

                        </tbody>                
                    </table>
                </div>
                
                
                

                
                
            </div>
            <div id="alterarnome" class="conteudo">
                <div class="titulo">
                    <h1>Alterar nome</h1>
                    <p>Escolha um usuário e altere o nome. </p>
                </div>
                <div class="usuarios-container">
                    <h2>Alterar nome</h2>
                    <table id="alterar-table" class="display">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>ID</th>
                                <th>Alterar Usuário</th>                               
                            </tr>
                        </thead>
                        <tbody>
                            {% for usuario in usuarios %}
                                <tr>
                                    <td>{{ usuario[1] }}</td>
                                    <td>{{ usuario[2] }}</td>
                                    <td>
                                        <div id="alterarNomeModal{{ usuario[0] }}" aria-labelledby="alterarNomeModalLabel{{ usuario[0] }}">
                                            <div class="modal-body">
                                                <form action="{{ url_for('alterar_nome', usuario_id=usuario[0]) }}" method="post">
                                                    <input type="text" placeholder="Inserir novo nome"  id="novo_nome" name="novo_nome" required>
                                                    <button type="submit" class="salvar-btn">Salvar</button>
                                                </form>
                                            </div>
                                        </div>
                                    </td>
                                        
                                </tr>
                            {% endfor %}
                        </tbody>                
                    </table>
                </div>             
            </div>
            <div id="alterarfuncao" class="conteudo">
                <div class="titulo">
                    <h1>Alterar função</h1>
                    <p>Escolha um usuário e altere a função para permitir mais ou menos permissões de acesso. </p>
                </div>
                <div class="usuarios-container">
                    <h2>Alterar Função</h2>
                    <table id="alterarfuncao-table" class="display">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Alterar Usuário</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for usuario in usuarios %}
                                <tr>
                                    <td>{{ usuario[1] }}</td>
                                    <td>
                                        <div class="funcao_box">
                                            <div>
                                                <select name="nova_funcao" id="nova_funcao_{{ usuario[0] }}">
                                                    {% for funcao in opcoes_funcao %}
                                                        <option value="{{ funcao }}" {% if funcao == usuario[3] %}selected{% endif %}>{{ funcao }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>                                            
                                            <div>
                                                <button type="button" onclick="alterarFuncao('{{ usuario[0] }}')">Alterar Função</button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    
                    
                    
                </div>             
            </div>
        </div>
    </section>


    

</body>
<script>

    history.pushState(null, null, 'pagina_nao_autenticada');
    window.addEventListener('popstate', function () {
        history.pushState(null, null, 'pagina_nao_autenticada');
    });

    //menu
    document.addEventListener("DOMContentLoaded", function () {
        var menuLinks = document.querySelectorAll(".menu-a1");
        var infos = document.getElementById("infos");

        function mostrarConteudo(id) {
            // Oculta todos os conteúdos
            var conteudos = document.querySelectorAll('.conteudo');
            conteudos.forEach(function (conteudo) {
                conteudo.style.display = 'none';
            });

            // Exibe o conteúdo relevante
            var conteudoSelecionado = document.getElementById(id);
            conteudoSelecionado.style.display = 'block';
        }

        // Adiciona um ouvinte de evento para cada link do menu
        var linksMenu = document.querySelectorAll('.menu-a1');
        linksMenu.forEach(function (link) {
            link.addEventListener('click', function (event) {
                event.preventDefault(); // Impede o comportamento padrão do link
                var href = link.getAttribute('href').substring(1); // Remove o caractere '#' do href
                mostrarConteudo(href);
                toggleMenu(link.parentElement); // Adiciona a classe 'active' e altera a cor do texto
            });
        });

        // Mostra o conteúdo relacionado a IP inicialmente
        mostrarConteudo('solicitacao');

        // Ativa o primeiro link do menu por padrão
        toggleMenu(linksMenu[0].parentElement);

        // Alterar a cor do menu
        function toggleMenu(element) {
            // Remove a classe 'active' de todos os elementos com a classe 'menudiv1'
            var menudiv1Elements = document.querySelectorAll('.menudiv1');
            menudiv1Elements.forEach(function (el) {
                el.classList.remove('active');
                el.querySelector('.link1').style.color = ''; // Volta para a cor padrão
                el.querySelector('.link1').style.fontWeight = ''; // Volta para o estilo de fonte padrão
            });

            // Adiciona a classe 'active' apenas ao elemento clicado
            element.classList.add('active');

            // Altera a cor do texto e o estilo de fonte do elemento clicado
            var linkElement = element.querySelector('.link1');
            linkElement.style.color = '#0b57ed';
            linkElement.style.fontWeight = 'bold';
        }
    });



    // Adiciona a classe 'active' ao primeiro elemento por padrão
    document.addEventListener('DOMContentLoaded', function() {
        var defaultActiveElement = document.querySelector('.menudiv1');
        toggleMenu(defaultActiveElement);
    });
    // mostrar o nome do input de selecionar arquivos
    document.getElementById('arquivo').addEventListener('change', function(e) {
        var fileName = e.target.files[0].name;
        document.getElementById('file-name').innerText = fileName;
    });

    //Menu - SOLICITAÇÃO 
    document.addEventListener("DOMContentLoaded", function () {
        var menuLinks2 = document.querySelectorAll(".solicitar-container .solicitar-box");
        var infos = document.getElementById("infos2-solicitacao");

        function mostrarConteudo(id) {
            // Oculta todos os conteúdos
            var conteudos2 = document.querySelectorAll('.conteudo2');
            conteudos2.forEach(function (conteudo) {
                conteudo.style.display = 'none';
            });

            // Exibe o conteúdo relevante
            var conteudoSelecionado2 = document.getElementById(id);
            conteudoSelecionado2.style.display = 'block';
        }

    // Adiciona um ouvinte de evento para cada link do menu
    var linksMenu2 = document.querySelectorAll('.solicitar-container .solicitar-box');
    linksMenu2.forEach(function (link) {
        link.addEventListener('click', function (event) {
            event.preventDefault(); // Impede o comportamento padrão do link
            var href = link.getAttribute('href').substring(1); // Remove o caractere '#' do href
            mostrarConteudo(href);
        });
    });

        // Mostra o conteúdo relacionado a IP inicialmente
        mostrarConteudo('solicitar');
    });

    //Solicitações aprovadas tabela 
    $(document).ready(function () {
        // Inicialize DataTable para a tabela de solicitações
        $('#solicitacoes-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'desc']] // 6 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });

        // Inicialize DataTable para a tabela de aprovações
        $('#aprovadas-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'desc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });

        // Inicialize DataTable para a tabela de pendentes
        $('#pendentes-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'desc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });

        $('#usuarios-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'asc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });

        $('#redefinir-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'asc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });
        $('#alterar-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'asc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        }); 
        $('#alterarfuncao-table').DataTable({
            language: {
                url: 'https://cdn.datatables.net/plug-ins/1.10.25/i18n/Portuguese-Brasil.json'
            },
            order: [[0, 'asc']] // 0 é o índice da coluna de data, 'desc' para ordenação descendente
            // Adicione outras opções de DataTables conforme necessário
        });
    });
    //menu sumir
    document.addEventListener('DOMContentLoaded', function () {
        var menubtn = document.querySelector(".menu-btn");
        var menu = document.querySelector(".menu");

        menubtn.addEventListener('click', function () {
            // Alternar a visibilidade do menu
            if (menu.style.display === 'none' || menu.style.display === '') {
                menu.style.display = 'block';
            } else {
                menu.style.display = 'none';
            }
        });
    });

    //
    function alterarFuncao(usuarioId) {
        // Obter o valor selecionado do campo de seleção
        var novaFuncao = document.getElementById('nova_funcao_' + usuarioId).value;

        // Enviar os dados para o servidor (você precisa implementar a rota no Flask para processar essa requisição)
        fetch('/alterar_funcao/' + usuarioId, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ nova_funcao: novaFuncao }),
        })
        .then(response => response.json())
        .then(data => {
            // Tratar a resposta do servidor (pode exibir uma mensagem de sucesso, atualizar a página, etc.)
            console.log(data);
        })
        .catch((error) => {
            console.error('Erro:', error);
        });
    }
</script>
</html>